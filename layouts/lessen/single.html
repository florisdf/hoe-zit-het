{{ define "header" }}
  <header>
    {{ partial "header/site-navigation.html" . }}
  </header>
{{ end }}

{{ define "mathjax" }} {{ partial "head/mathjax" . }} {{ end }}
{{ define "bokeh" }} {{ partial "head/bokeh" . }} {{ end }}
{{ define "fancybox" }} {{ partial "head/fancybox" . }} {{ end }}

{{ define "main" }}
  <div class="mw8 center ph3">
    <h1 class="f1" style="color: {{ $.Parent.Params.section_color }};">
      {{ .Title }}
    </h1>
    {{ partial "main/save_pdf" . }}
    <div class="flex-l flex-row-reverse">
      <div class="w-third-l ph3-l mv2">
        {{ partial "main/toc.html" . }}
      </div>
      <article class="center cf w-two-thirds-l">
        <section class="nested-copy-line-height lh-copy f4 nested-links nested-img mid-gray">
          {{ $ad := ( partial "main/article-ad.html" . ) }}

          {{ range $idx, $cont := ( split .Content "<h2" ) }}
            {{ if eq $idx 0 }}
              {{ $cont | safeHTML }}
            {{ else if eq $idx 1 }}
              {{ print "<h2" $cont $ad | safeHTML }}
            {{ else }}
              {{ print "<h2" $cont | safeHTML }}
            {{ end }}
          {{ end }}
        
        {{ partial "main/save_pdf" . }}
        {{ partial "main/tags.html" . }}
        {{ partial "main/to-top.html" . }}
        </section>
      </article>
    </div>
  </div>
{{ end }}
